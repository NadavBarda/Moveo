<mat-card class="register-card">
    <h2>Register</h2>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Full Name</mat-label>
            <input matInput formControlName="name" />
            @if (registerForm.get('name')?.invalid && registerForm.get('name')?.touched) {
            <div class="error">
                @if (registerForm.get('name')?.errors?.['required']) {
                <small>Name is required.</small>
                }
            </div>
            }
        </mat-form-field>


        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" autocomplete="email" />
            @if (registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
            <div class="error">
                @if (registerForm.get('email')?.errors?.['required']) {
                <small>Email is required.</small>
                }
                @if (registerForm.get('email')?.errors?.['email']) {
                <small>Not valid Email</small>
                }
            </div>
            }
        </mat-form-field>


        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Password</mat-label>
            <input matInput type="password" formControlName="password" autocomplete="new-password" />
            @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            <div class="error">
                @if (registerForm.get('password')?.errors?.['required']) {
                <small>Password is required.</small>
                }
                @if (registerForm.get('password')?.errors?.['length']) {
                <small>Password must be at least 6 characters long.</small>
                }
                @if (registerForm.get('password')?.errors?.['passwordPattern']) {
                <small>Password must contain both letters and numbers.</small>
                }
            </div>
            }
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Age</mat-label>
            <input type="number" matInput formControlName="age" />
            @if (registerForm.get('age')?.invalid && registerForm.get('age')?.touched) {
            <div class="error">
                @if (registerForm.get('age')?.errors?.['max'] || registerForm.get('age')?.errors?.['min']) {
                <small>age must be between 18 - 120</small>
                }
            </div>
            }
        </mat-form-field>



        <button mat-raised-button color="primary" class="full-width" type="submit">
            Register
        </button>

        @if (message()) {
        <p class="message">{{ message() }}</p>
        }

        <p class="login-link">
            Already have an account?
            <a routerLink="/login">Login here</a>
        </p>
    </form>
</mat-card>