<mat-card class="edit-profile-card">
    @if (!loading()) {
    <h2>Edit Profile</h2>
    <form [formGroup]="editForm" class="edit-profile-form">


        <div class="user-fields">
            <mat-form-field class="full-width">
                <mat-label>Name</mat-label>
                <input matInput formControlName="name" />
                <mat-error *ngIf="editForm.get('name')?.touched && editForm.get('name')?.invalid">
                    Name is required.
                </mat-error>
            </mat-form-field>

            <app-input-field [control]="getControl('birthDate')" [inputType]="'date'" [label]="'BirthDate'"
                [validationMessages]="validator_map['birthDate']"></app-input-field>


        </div>
        
        <app-address-field [addressForm]="addressForm"></app-address-field>


        <div class="control-buttons">
            <button matButton="filled" (click)="saveChanges()">Save!</button>
            <button matButton="filled" class="cancel-btn" (click)="changesSaved.emit()">Cancel Changes</button>
        </div>


    </form>
    }
    @else {
    <div class="spinner-container">
        <h4>Saving Changes...</h4>
        <mat-spinner class="spinner"></mat-spinner>
    </div>


    }
</mat-card>